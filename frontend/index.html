<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CampSpot - Your Next Adventure Awaits</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CRITICAL: URL OVERRIDE SCRIPT - MUST LOAD BEFORE EVERYTHING ELSE -->
    <script>
      console.log('üö® CRITICAL URL OVERRIDE LOADING - BEFORE ALL OTHER SCRIPTS...');
      
      // EMERGENCY: Override fetch immediately when script loads
      (function() {
        const CORRECT_BACKEND_URL = 'https://campspot-production.up.railway.app';
        const OLD_RENDER_DOMAINS = [
          'campspot-backend.onrender.com',
          'https://campspot-backend.onrender.com',
          'http://campspot-backend.onrender.com'
        ];
        
        function fixUrl(url) {
          if (typeof url !== 'string') return url;
          
          for (const oldDomain of OLD_RENDER_DOMAINS) {
            if (url.includes(oldDomain)) {
              let fixedUrl = url.replace(oldDomain, CORRECT_BACKEND_URL);
              if (fixedUrl.startsWith('http://campspot-production.up.railway.app')) {
                fixedUrl = fixedUrl.replace('http://', 'https://');
              }
              console.warn('üîß EMERGENCY URL FIX:', url, '‚Üí', fixedUrl);
              return fixedUrl;
            }
          }
          return url;
        }
        
        // Override fetch IMMEDIATELY
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
          const fixedUrl = fixUrl(url);
          if (fixedUrl !== url) {
            console.log('üåê FETCH INTERCEPTED AND FIXED');
          }
          return originalFetch(fixedUrl, options);
        };
        
        // Override Request constructor
        const OriginalRequest = window.Request;
        window.Request = function(input, init) {
          const fixedInput = fixUrl(input);
          if (fixedInput !== input) {
            console.log('üìù REQUEST INTERCEPTED AND FIXED');
          }
          return new OriginalRequest(fixedInput, init);
        };
        
        console.log('‚úÖ EMERGENCY URL OVERRIDE ACTIVE - Railway backend enforced');
        console.log('üéØ Correct backend:', CORRECT_BACKEND_URL);
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
